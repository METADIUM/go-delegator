package json

import (
	"testing"
)

func TestSerialize(t *testing.T) {
	var testMsg string
	var reqRet RPCRequest
	testMsg = "{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[\"a\",1],\"id\":100}"
	reqRet = GetRPCRequestFromJSON(testMsg)
	if reqRet.ID != 100 {
		t.Errorf("Failed to deserialize RpcRequest")
	}

	var respRet RPCResponse
	testMsg = "{\"jsonrpc\":\"2.0\",\"id\": 2,\"error\": {\"code\": -32602,\"message\": \"invalid argument 1: json: cannot unmarshal number into Go value of type bool\"}}"
	respRet = GetRPCResponseFromJSON(testMsg)
	if respRet.ID != 2 {
		t.Errorf("Failed to deserialize RpcResponse")
	}

	testMsg = "{\"jsonrpc\":\"2.0\",\"id\":2,\"result\":{\"difficulty\":\"0x247d5f7e\",\"extraData\":\"0xd5830109058650617269747986312e32342e31826c69\",\"gasLimit\":\"0x493480\",\"gasUsed\":\"0x1fb0e9\",\"hash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000001000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000001004000000000000000000000000000000000000000000000000000000000000000000000\",\"miner\":\"0x1d931a4c49407cc7df8151035a16b92b11a34706\",\"mixHash\":\"0xb60d4eebba203a49c8bf6cdfa899863d4e43ec4da0e69ba19a069a5b1f2e8e20\",\"nonce\":\"0x0b080f0004dfafd4\",\"number\":\"0x3252a3\",\"parentHash\":\"0xadc24fe00b65d0d7bb196af83e91857c040610249ad8196a071e74be2d1c45e7\",\"receiptsRoot\":\"0xeae5240af6ab52599604542eb468a54b7fb32c22dba69b3dfcf47cc08a2cbe8f\",\"sha3Uncles\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"size\":\"0x226b\",\"stateRoot\":\"0xa97a49bf738e60ceacc3da826de42eba9f79c4c42be36fc29542278a8aa79ba4\",\"timestamp\":\"0x5b06668f\",\"totalDifficulty\":\"0x1da996b62f022d\",\"transactions\":[{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0xc5125e66e8acba1a7a5b82fbdbf63dbc467ec958\",\"gas\":\"0x4630c0\",\"gasPrice\":\"0xba43b7400\",\"hash\":\"0x370fd4fa8db6d786c1e986f8f60b2c1baa4c0b554d7916222706e02f6ee26745\",\"input\":\"0x608060405234801561001057600080fd5b506040516020806108e2833981016040525160018054600160a060020a03191633600160a060020a0316179055600080546001607860020a0319167101000000000000000000000000000000000090920491909117815561086b90819061007790396000f30060806040526004361061008d5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166323d2d19b811461009257806331e19cfa146100d557806341d1a4d6146100ea5780636977083e1461011f578063b0e572c814610161578063e0fe4a84146101ab578063e43ba0bd146101d0578063edfceace146101f2575b600080fd5b34801561009e57600080fd5b506100c36001608860020a031960043516600160a060020a0360243516604435610214565b60408051918252519081900360200190f35b3480156100e157600080fd5b506100c3610357565b3480156100f657600080fd5b5061010260043561035e565b604080516001608860020a03199092168252519081900360200190f35b34801561012b57600080fd5b5061014d6001608860020a031960043516600160a060020a03602435166103ab565b604080519115158252519081900360200190f35b34801561016d57600080fd5b506101836001608860020a031960043516610472565b60408051600160a060020a039094168452602084019290925282820152519081900360600190f35b3480156101b757600080fd5b5061014d6001608860020a0319600435166024356104c6565b3480156101dc57600080fd5b5061014d6001608860020a03196004351661056f565b3480156101fe57600080fd5b506100c36001608860020a031960043516610600565b60015460009033600160a060020a0390811691161461023257600080fd5b61023b8461056f565b1561024557600080fd5b6001608860020a03198416600081815260026020818152604092839020805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03891690811782556001808301899055600380548083019091557fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b8682040180546effffffffffffffffffffffffffffff938316600f026101000a9384021916710100000000000000000000000000000000008e0493909302929092179091559190930181905583519081529081019190915280820185905290517fc6789ad3b9f6ba82bbe3ff2ed4b6b77e4181f62b73e90f00d8682129633cb832916060908290030190a250600354600019019392505050565b6003545b90565b600060038281548110151561036f57fe5b9060005260206000209060029182820401919006600f029054906101000a9004710100000000000000000000000000000000000290505b919050565b60015460009033600160a060020a039081169116146103c957600080fd5b6103d28361056f565b15156103dd57600080fd5b6001608860020a031983166000818152600260208181526040928390208054600160a060020a03881673ffffffffffffffffffffffffffffffffffffffff1990911681178255928101546001909101548451918252918101929092528183015290517fa0859cc35205f8d69a0fbea1eef87bd8f02c7d9abf587753cfc719f33e1ec8069181900360600190a250600192915050565b60008060006104808461056f565b151561048b57600080fd5b5050506001608860020a0319166000908152600260208190526040909120805460018201549190920154600160a060020a0390921692909190565b60015460009033600160a060020a039081169116146104e457600080fd5b6104ed8361056f565b15156104f857600080fd5b6001608860020a03198316600081815260026020818152604092839020600181018790559182015491548351928352600160a060020a03169082015280820185905290517fa0859cc35205f8d69a0fbea1eef87bd8f02c7d9abf587753cfc719f33e1ec8069181900360600190a250600192915050565b6003546000901515610583575060006103a6565b6001608860020a03198216600081815260026020819052604090912001546003805490919081106105b057fe5b9060005260206000209060029182820401919006600f029054906101000a9004710100000000000000000000000000000000000270ffffffffffffffffffffffffffffffffff1916149050919050565b6001546000908190819033600160a060020a0390811691161461062257600080fd5b61062b8461056f565b151561063657600080fd5b6001608860020a03198416600090815260026020819052604090912001546003805491935090600019810190811061066a57fe5b9060005260206000209060029182820401919006600f029054906101000a900471010000000000000000000000000000000000029050806003838154811015156106b057fe5b60009182526020808320600280840490910180546effffffffffffffffffffffffffffff6001909516600f026101000a94850219167101000000000000000000000000000000000090960493909302949094179091556001608860020a031984168252829052604090200182905560038054906107319060001983016107e8565b506040805183815290516001608860020a03198616917fbdf9c388e6a94dcb2d9de55108de5d2abf78575c99ce1de23cbda5a9bcfcfb83919081900360200190a26001608860020a0319811660008181526002602090815260409182902080546001909101548351878152600160a060020a03909216928201929092528083019190915290517fa0859cc35205f8d69a0fbea1eef87bd8f02c7d9abf587753cfc719f33e1ec8069181900360600190a25092915050565b81548183558181111561081c57600101600290048160010160029004836000526020600020918201910161081c9190610821565b505050565b61035b91905b8082111561083b5760008155600101610827565b50905600a165627a7a7230582042e7685d8151aac6516c293cefdbbd52c59cea1ee353a575c0627af5f52d0142002973747261744d616e546573746572000000000000000000000000000000000000\",\"nonce\":\"0x7c1\",\"to\":null,\"transactionIndex\":\"0x0\",\"value\":\"0x0\",\"v\":\"0x1c\",\"r\":\"0xa3d4cc438db625a6ef9985acfeff52b408ab3a89e8707353862146a3bca05be5\",\"s\":\"0x5b6f06be8b1dc23697ce3895d8005e11471ec43596e578d0af2f39381affdb56\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0x7ab1ff6992746952cad1d2c1112e0a0bed3f3c3a\",\"gas\":\"0x3d0900\",\"gasPrice\":\"0x51f4d5c00\",\"hash\":\"0xf4d9de58aabc6920f9adf49b6b10d0d7ffae7739fa1f377e6d4203c5e14cf33d\",\"input\":\"0xcf7e06cb0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"nonce\":\"0x1b37\",\"to\":\"0x104759bdd7f61c51e29697fbe1225128005d835b\",\"transactionIndex\":\"0x1\",\"value\":\"0x0\",\"v\":\"0x2a\",\"r\":\"0x3e9d2efce7006bff0cdab78c44a9b7c136b47b87705cbc2c1cdc2259a9a7252a\",\"s\":\"0x12c1c5db6269e18bee5415a583c87e5a0ac19cd0dbde76da83f415320fb44736\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0x088d2ac5d2779a181678898e1d61e62dc632d9e1\",\"gas\":\"0x13af57\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0x6fe92169d9ff39b5bdefa7e994c9538ac5f72282cee120dc1499a90ba75290a0\",\"input\":\"0x60806040526040805190810160405280600481526020017f56312e3000000000000000000000000000000000000000000000000000000000815250600690805190602001906200005192919062000143565b503480156200005f57600080fd5b50604051620011f3380380620011f383398101806040528101908080519060200190929190805182019291906020018051906020019092919080518201929190505050836000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508360028190555082600390805190602001906200010492919062000143565b5081600460006101000a81548160ff021916908360ff16021790555080600590805190602001906200013892919062000143565b5050505050620001f2565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200018657805160ff1916838001178555620001b7565b82800160010185558215620001b7579182015b82811115620001b657825182559160200191906001019062000199565b5b509050620001c69190620001ca565b5090565b620001ef91905b80821115620001eb576000816000905550600101620001d1565b5090565b90565b610ff180620002026000396000f3006080604052600436106100af576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100c1578063095ea7b31461015157806318160ddd146101b657806323b872dd146101e1578063313ce5671461026657806354fd4d501461029757806370a082311461032757806395d89b411461037e578063a9059cbb1461040e578063cae9ca5114610473578063dd62ed3e1461051e575b3480156100bb57600080fd5b50600080fd5b3480156100cd57600080fd5b506100d6610595565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101165780820151818401526020810190506100fb565b50505050905090810190601f1680156101435780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561015d57600080fd5b5061019c600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610633565b604051808215151515815260200191505060405180910390f35b3480156101c257600080fd5b506101cb610725565b6040518082815260200191505060405180910390f35b3480156101ed57600080fd5b5061024c600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061072b565b604051808215151515815260200191505060405180910390f35b34801561027257600080fd5b5061027b6109a4565b604051808260ff1660ff16815260200191505060405180910390f35b3480156102a357600080fd5b506102ac6109b7565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156102ec5780820151818401526020810190506102d1565b50505050905090810190601f1680156103195780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561033357600080fd5b50610368600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610a55565b6040518082815260200191505060405180910390f35b34801561038a57600080fd5b50610393610a9d565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103d35780820151818401526020810190506103b8565b50505050905090810190601f1680156104005780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561041a57600080fd5b50610459600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610b3b565b604051808215151515815260200191505060405180910390f35b34801561047f57600080fd5b50610504600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610ca1565b604051808215151515815260200191505060405180910390f35b34801561052a57600080fd5b5061057f600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610f3e565b6040518082815260200191505060405180910390f35b60038054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561062b5780601f106106005761010080835404028352916020019161062b565b820191906000526020600020905b81548152906001019060200180831161060e57829003601f168201915b505050505081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b60025481565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101580156107f7575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410155b80156108035750600082115b1561099857816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905061099d565b600090505b9392505050565b600460009054906101000a900460ff1681565b60068054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a4d5780601f10610a2257610100808354040283529160200191610a4d565b820191906000526020600020905b815481529060010190602001808311610a3057829003601f168201915b505050505081565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60058054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b335780601f10610b0857610100808354040283529160200191610b33565b820191906000526020600020905b815481529060010190602001808311610b1657829003601f168201915b505050505081565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015610b8b5750600082115b15610c9657816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050610c9b565b600090505b92915050565b600082600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508373ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925856040518082815260200191505060405180910390a38373ffffffffffffffffffffffffffffffffffffffff1660405180807f72656365697665417070726f76616c28616464726573732c75696e743235362c81526020017f616464726573732c627974657329000000000000000000000000000000000000815250602e01905060405180910390207c01000000000000000000000000000000000000000000000000000000009004338530866040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001828051906020019080838360005b83811015610ee2578082015181840152602081019050610ec7565b50505050905090810190601f168015610f0f5780820380516001836020036101000a031916815260200191505b509450505050506000604051808303816000875af1925050501515610f3357600080fd5b600190509392505050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050929150505600a165627a7a72305820c5c0fe6c0067eb1965821ac7f766d9ab97de9b3d88ba02ca44367072e5441c650029000000000000000000000000000000000000000000000000000000003b9aca000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000b6368656e676475636f696e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003545a420000000000000000000000000000000000000000000000000000000000\",\"nonce\":\"0x0\",\"to\":null,\"transactionIndex\":\"0x2\",\"value\":\"0x0\",\"v\":\"0x29\",\"r\":\"0x4062c7c7acc9570e3b283d24c9376e3189f33503bca26313f70f4d2040dcb95c\",\"s\":\"0x59eca769f33ed823e8172f23b509d327d01761ede3f3404b4125245efce6e7b5\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0xd4b810c7c5cb1b115eff52195fc3cd43861731ea\",\"gas\":\"0x61a80\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0x02e514dc7ad3ad0693a23cbcf24b2655728111687e726bee28bf8d88568c821e\",\"input\":\"0xe1b7d69b000000000000000000000000000000000000000000000000000000000000008000000000000000000000000094c2fa085160d1769893f9603d2098cef7d02d9300000000000000000000000000000000000000000000000000000000000000c04d616e7531000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c4d616e7566616374757265720000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000941686d6564616261640000000000000000000000000000000000000000000000\",\"nonce\":\"0x6\",\"to\":\"0x337f98c10ac50b6f060f5b5521c009b0d4668aae\",\"transactionIndex\":\"0x3\",\"value\":\"0x0\",\"v\":\"0x29\",\"r\":\"0x1ab38c40ea2b679118483fb47b63b31d5d6b14d97d786d0ac8d33396a9e6d902\",\"s\":\"0x7fc910662dbdc5459903fc69c8be0b604ea9dbf7a3174adb3c9f9b89052a0db1\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0x81b7e08f65bdf5648606c89998a9cc8164397647\",\"gas\":\"0x5208\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0xeb39eaf8fc891d6eaa39395f356fea848912c28541fc20228a41067423c6b8ff\",\"input\":\"0x\",\"nonce\":\"0x830d58\",\"to\":\"0xfdabec8152e1a33164a14177d1819689659e8061\",\"transactionIndex\":\"0x4\",\"value\":\"0xde0b6b3a7640000\",\"v\":\"0x1b\",\"r\":\"0x4d40685e9ad9e25eae6eb05c4cba776dfcdfaab6aa7029f493ad7d9c6f5d685\",\"s\":\"0x18dd423b790f1295e204e9c7bcb55417ba47a3039f99e325c064a0e0a6b1655c\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0x81b7e08f65bdf5648606c89998a9cc8164397647\",\"gas\":\"0x5208\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0x0255b0d62fd9e2fa813f9f4bbe40481f040a25ed7c2bba84267aeca79cda8ab2\",\"input\":\"0x\",\"nonce\":\"0x830d59\",\"to\":\"0xfdabec8152e1a33164a14177d1819689659e8061\",\"transactionIndex\":\"0x5\",\"value\":\"0xde0b6b3a7640000\",\"v\":\"0x1b\",\"r\":\"0x19b11af223397f5d7ace026ec52966cd9cc4145e0c3896e7ee3d80a7ac7a6ddb\",\"s\":\"0x1cf860e5ad35fcd51792e70e82911df0d89e64aadf49ed6e6a7483a5ab4d4ce9\"},{\"blockHash\":\"0xe29b7259f4bcd98b82fd95c283f874a1ba65b1d60ef520c66622af93ce95b765\",\"blockNumber\":\"0x3252a3\",\"from\":\"0x81b7e08f65bdf5648606c89998a9cc8164397647\",\"gas\":\"0x5208\",\"gasPrice\":\"0x3b9aca00\",\"hash\":\"0xb26b41b2a64d1ca7374c4bbcf71fb5fe810be92694900a6ae17575649021bd0c\",\"input\":\"0x\",\"nonce\":\"0x830d5a\",\"to\":\"0xfdabec8152e1a33164a14177d1819689659e8061\",\"transactionIndex\":\"0x6\",\"value\":\"0xde0b6b3a7640000\",\"v\":\"0x1b\",\"r\":\"0x8aacb06a89a63a5424a266957a6ad47f4acde1254383d9bbdc5664175643e56c\",\"s\":\"0x5e077cadba2f5cedb7a8d8128a636829971a64dc891ce15fd66d97e3877c1fec\"}],\"transactionsRoot\":\"0x8e5decedc3d921dd98ae8f770bc0d500903e28dc3e3be2c078b3e178f73c1ebd\",\"uncles\":[]}}"
	respRet = GetRPCResponseFromJSON(testMsg)
	if respRet.ID != 2 {
		t.Errorf("Failed to deserialize RpcResponse")
	}
}

func TestDeserialize(t *testing.T) {
	var respRet RPCResponse
	testMsg := "{\"jsonrpc\":\"2.0\",\"id\": 2,\"error\": {\"code\": -32602,\"message\": \"invalid argument 1: json: cannot unmarshal number into Go value of type bool\"}}"
	respRet = GetRPCResponseFromJSON(testMsg)
	if respRet.ID != 2 {
		t.Errorf("Failed to deserialize RpcResponse")
	}

	respMsg := respRet.String()
	if respMsg == "" {
		t.Errorf("Failed to serialize RpcResponse")
	}
}
